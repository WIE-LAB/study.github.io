<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>è€ƒç ”æ‚–è®ºå¼•æ“</title>
    <style>
        :root {
            --primary: #7e57c2;
            --secondary: #26a69a;
            --accent: #ff7043;
        }

        body {
            background: #1a1b26;
            color: #a9b1d6;
            font-family: 'Fira Code', monospace;
            margin: 0;
            padding: 20px;
        }

        .hidden { display: none; }

        .mission-board {
            max-width: 800px;
            margin: 2rem auto;
            background: rgba(0,0,0,0.7);
            border-radius: 10px;
            padding: 20px;
        }

        .task {
            background: rgba(255,255,255,0.05);
            border-left: 3px solid var(--primary);
            margin: 1rem 0;
            padding: 1rem;
            cursor: pointer;
            display: grid;
            grid-template-columns: 30px 1fr 100px;
            align-items: center;
            transition: transform 0.3s;
        }

        .task:hover {
            transform: translateX(10px);
        }

        .progress-bar {
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0;
            transition: 1s;
        }

        .console {
            background: rgba(0,0,0,0.7);
            border-radius: 10px;
            padding: 20px;
            margin: 2rem auto;
            max-width: 800px;
            border: 2px dashed var(--secondary);
        }

        .license-container {
            padding: 1.5rem;
            margin-top: 1rem;
        }

        #finalLicense {
            white-space: pre-wrap;
            background: rgba(0,0,0,0.5);
            padding: 1rem;
            border-radius: 5px;
        }

        .reset-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            float: right;
        }
    </style>
</head>
<body>
    <!-- ä»»åŠ¡ç³»ç»Ÿ -->
    <div id="taskSystem">
        <div class="mission-board">
            <h2>ğŸ“¡ åå‘è‡ªå¾‹ä»»åŠ¡ç»ˆç«¯</h2>
            
            <div class="task" onclick="updateProgress(0)">
                <div>ğŸ…°ï¸</div>
                <div>
                    <h3>è¯­æ³•æš´åŠ›æ‹†è§£</h3>
                    <p>ç”¨ç¼–ç¨‹æœ¯è¯­é‡å†™è€ƒç ”è‹±è¯­é•¿éš¾å¥</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress0"></div>
                    </div>
                </div>
                <div style="color: var(--secondary);">+15 èƒ½é‡è±†</div>
            </div>

            <div class="task" onclick="updateProgress(1)">
                <div>ğŸ”„</div>
                <div>
                    <h3>é€’å½’å¼ä¼‘æ¯</h3>
                    <p>è®¾ç½®25åˆ†é’Ÿå¼ºåˆ¶ä¼‘æ¯å€’è®¡æ—¶</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress1"></div>
                    </div>
                </div>
                <div style="color: var(--secondary);">+1 æ‘†çƒ‚ä¿¡ç”¨ç‚¹</div>
            </div>

            <div class="task" onclick="updateProgress(2)">
                <div>ğŸ¨</div>
                <div>
                    <h3>é”™è¯¯åˆ›ä½œ</h3>
                    <p>æ•…æ„å†™é”™äº”é“é¢˜ç›®ï¼Œç”¨æœ€è’è°¬çš„åšæ³•</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress2"></div>
                    </div>
                </div>
                <div style="color: var(--secondary);">+20 å›é€†å€¼</div>
            </div>
        </div>
    </div>

    <!-- æ‘†çƒ‚æ§åˆ¶å° -->
    <div id="procrastiConsole" class="console hidden">
        <button class="reset-btn" onclick="resetSystem()">é‡ç½®ç³»ç»Ÿ</button>
        <h2>ğŸ® æ‘†çƒ‚æ§åˆ¶å°</h2>
        <div class="license-container">
            <h3>âš›ï¸ é‡å­æ‘†çƒ‚è®¸å¯è¯</h3>
            <pre id="finalLicense"></pre>
            <button onclick="updateLicense()">åˆ·æ–°è¯ä¹¦</button>
        </div>
    </div>

    <script>
        // å¢å¼ºç‰ˆçŠ¶æ€ç®¡ç†
        const state = {
            tasks: [
                { progress: 0, target: 3 },
                { progress: 0, target: 1 },
                { progress: 0, target: 5 }
            ],
            unlocked: false
        };

        // åˆå§‹åŒ–åŠ è½½
        function loadState() {
            const saved = localStorage.getItem('procrastiState');
            if(saved) {
                const savedState = JSON.parse(saved);
                state.tasks = savedState.tasks.map((t, i) => ({
                    progress: t.progress,
                    target: state.tasks[i].target
                }));
                state.unlocked = savedState.unlocked;
                
                state.tasks.forEach((task, index) => {
                    const progress = (task.progress / task.target) * 100;
                    document.getElementById(`progress${index}`).style.width = `${progress}%`;
                });
                
                checkUnlock();
            }
        }

        // ä¿å­˜çŠ¶æ€
        function saveState() {
            const saveData = {
                tasks: state.tasks.map(t => ({ progress: t.progress })),
                unlocked: state.unlocked
            };
            localStorage.setItem('procrastiState', JSON.stringify(saveData));
        }

        // æ›´æ–°è¿›åº¦
        function updateProgress(index) {
            const task = state.tasks[index];
            if(task.progress < task.target) {
                task.progress++;
                const progress = (task.progress / task.target) * 100;
                document.getElementById(`progress${index}`).style.width = `${progress}%`;
                checkUnlock();
                saveState();
            }
        }

        // æ£€æŸ¥è§£é”æ¡ä»¶
        function checkUnlock() {
            state.unlocked = state.tasks.every(t => t.progress >= t.target);
            if(state.unlocked) {
                document.getElementById('taskSystem').classList.add('hidden');
                document.getElementById('procrastiConsole').classList.remove('hidden');
                updateLicense();
            } else {
                document.getElementById('taskSystem').classList.remove('hidden');
                document.getElementById('procrastiConsole').classList.add('hidden');
            }
        }

        // æ›´æ–°è®¸å¯è¯
        function updateLicense() {
            const licenseText = `
                ç”¨æˆ·ID: xr
                æˆå°±è§£é”:
                âœ“ è¯­æ³•é‡æ„ ${state.tasks[0].progress}æ¬¡
                âœ“ é€’å½’ä¼‘æ¯ ${state.tasks[1].progress}æ¬¡
                âœ“ é”™è¯¯åˆ›ä½œ ${state.tasks[2].progress}æ¬¡
                
                ç‰¹æƒæ¸…å•:
                â€¢ ç‰›å¥¶æ— é™è¡¥ç»™åè®® v2.1
                â€¢ æ·±å¤œè±å…æƒæœ‰æ•ˆæœŸ: æ— é™æœŸ
                â€¢ é‡å­æ‘†çƒ‚èƒ½é‡: ${state.tasks[2].progress * 20}%
            `;
            document.getElementById('finalLicense').innerText = licenseText;
        }

        // é‡ç½®ç³»ç»Ÿ
        function resetSystem() {
            localStorage.removeItem('procrastiState');
            location.reload();
        }

        // åˆå§‹åŒ–
        loadState();
    </script>
</body>
</html>